#ifndef _CUST_BATTERY_METER_TABLE_H
#define _CUST_BATTERY_METER_TABLE_H

#include <mach/mt_typedefs.h>

// ============================================================
// define
// ============================================================
#define BAT_NTC_10 1
#define BAT_NTC_47 0

#if (BAT_NTC_10 == 1)
#define RBAT_PULL_UP_R             16900	
#define RBAT_PULL_DOWN_R		   27000	
#endif

#if (BAT_NTC_47 == 1)
#define RBAT_PULL_UP_R             61900	
#define RBAT_PULL_DOWN_R		  100000	
#endif
#define RBAT_PULL_UP_VOLT          1800



// ============================================================
// ENUM
// ============================================================

// ============================================================
// structure
// ============================================================

// ============================================================
// typedef
// ============================================================
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// ============================================================
// External Variables
// ============================================================

// ============================================================
// External function
// ============================================================

// ============================================================
// <DOD, Battery_Voltage> Table
// ============================================================
#if (BAT_NTC_10 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,68237},
        {-15,53650},
        {-10,42506},
        { -5,33892},
        {  0,27219},
        {  5,22021},
        { 10,17926},
        { 15,14674},
        { 20,12081},
        { 25,10000},
        { 30,8315},
        { 35,6948},
        { 40,5834},
        { 45,4917},
        { 50,4161},
        { 55,3535},
        { 60,3014}
    };
#endif

#if (BAT_NTC_47 == 1)
    BATT_TEMPERATURE Batt_Temperature_Table[] = {
        {-20,483954},
        {-15,360850},
        {-10,271697},
        { -5,206463},
        {  0,158214},
        {  5,122259},
        { 10,95227},
        { 15,74730},
        { 20,59065},
        { 25,47000},
        { 30,37643},
        { 35,30334},
        { 40,24591},
        { 45,20048},
        { 50,16433},
        { 55,13539},
        { 60,11210}        
    };
#endif

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0	,	4021},
	{2	,	4000},
	{5	,	3967},
	{7	,	3939},
	{9	,	3927},
	{11	,	3916},
	{14	,	3906},
	{16	,	3895},
	{18	,	3884},
	{20	,	3872},
	{23	,	3859},
	{25	,	3847},
	{27	,	3836},
	{29	,	3827},
	{32	,	3821},
	{34	,	3816},
	{36	,	3811},
	{38	,	3806},
	{41	,	3802},
	{43	,	3798},
	{45	,	3795},
	{47	,	3792},
	{50	,	3790},
	{52	,	3788},
	{54	,	3787},
	{56	,	3785},
	{59	,	3783},
	{61	,	3781},
	{63	,	3779},
	{65	,	3775},
	{68	,	3770},
	{70	,	3763},
	{72	,	3755},
	{74	,	3745},
	{77	,	3733},
	{79	,	3723},
	{81	,	3714},
	{83	,	3709},
	{86	,	3704},
	{88	,	3699},
	{90	,	3693},
	{91	,	3689},
	{92	,	3686},
	{93	,	3682},
	{94	,	3678},
	{94	,	3675},
	{95	,	3671},
	{95	,	3668},
	{96	,	3664},
	{96	,	3662},
	{97	,	3660},
	{97	,	3657},
	{97	,	3655},
	{97	,	3653},
	{98	,	3650},
	{98	,	3650},
	{98	,	3649},
	{98	,	3648},
	{99	,	3647},
	{99	,	3646},
	{99	,	3645},
	{99	,	3644},
	{99	,	3643},
	{100	,	3642},
	{100	,	3642},
	{100	,	3641},
	{100	,	3640},
	{100	,	3639},
	{100	,	3639},
	{100	,	3639},
	{100	,	3638},
	{100	,	3637},
	{100	,	3636},
	{100	,	3636},
	{100	,	3636},
	{100	,	3636},
	{100	,	3636}	       
};      
        
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{
	{0	,	4165},
	{2	,	4124},
	{3	,	4103},
	{5	,	4089},
	{6	,	4079},
	{8	,	4064},
	{9	,	4045},
	{11	,	4025},
	{13	,	4008},
	{14	,	3996},
	{16	,	3987},
	{17	,	3980},
	{19	,	3972},
	{20	,	3964},
	{22	,	3956},
	{24	,	3948},
	{25	,	3939},
	{27	,	3930},
	{28	,	3920},
	{30	,	3911},
	{31	,	3900},
	{33	,	3889},
	{35	,	3876},
	{36	,	3864},
	{38	,	3854},
	{39	,	3845},
	{41	,	3837},
	{42	,	3830},
	{44	,	3824},
	{46	,	3819},
	{47	,	3814},
	{49	,	3810},
	{50	,	3806},
	{52	,	3802},
	{53	,	3799},
	{55	,	3796},
	{57	,	3792},
	{58	,	3790},
	{60	,	3788},
	{61	,	3786},
	{63	,	3785},
	{65	,	3784},
	{66	,	3783},
	{68	,	3781},
	{69	,	3779},
	{71	,	3776},
	{72	,	3774},
	{74	,	3770},
	{75	,	3767},
	{77	,	3762},
	{79	,	3757},
	{80	,	3751},
	{82	,	3744},
	{83	,	3736},
	{85	,	3728},
	{87	,	3720},
	{88	,	3710},
	{90	,	3704},
	{91	,	3701},
	{93	,	3696},
	{94	,	3684},
	{96	,	3652},
	{98	,	3582},
	{99	,	3508},
	{100	,	3431},
	{100	,	3402},
	{100	,	3385},
	{100	,	3375},
	{100	,	3367},
	{100	,	3362},
	{100	,	3358},
	{100	,	3355},
	{100	,	3353},
	{100	,	3351},
	{100	,	3351},
	{100	,	3351},
	{100	,	3351}	       
};           

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{
	{0	,	4183},
	{1	,	4164},
	{3	,	4148},
	{4	,	4133},
	{6	,	4119},
	{7	,	4105},
	{9	,	4091},
	{10	,	4079},
	{12	,	4067},
	{13	,	4055},
	{15	,	4040},
	{16	,	4026},
	{18	,	4014},
	{19	,	4003},
	{21	,	3992},
	{22	,	3983},
	{24	,	3973},
	{25	,	3964},
	{27	,	3954},
	{28	,	3945},
	{30	,	3937},
	{31	,	3928},
	{33	,	3919},
	{34	,	3911},
	{36	,	3902},
	{37	,	3893},
	{39	,	3881},
	{40	,	3868},
	{42	,	3855},
	{43	,	3844},
	{44	,	3836},
	{46	,	3828},
	{47	,	3822},
	{49	,	3817},
	{50	,	3812},
	{52	,	3808},
	{53	,	3803},
	{55	,	3800},
	{56	,	3796},
	{58	,	3793},
	{59	,	3790},
	{61	,	3787},
	{62	,	3785},
	{64	,	3782},
	{65	,	3780},
	{67	,	3779},
	{68	,	3777},
	{70	,	3775},
	{71	,	3771},
	{73	,	3767},
	{74	,	3762},
	{76	,	3757},
	{77	,	3752},
	{79	,	3747},
	{80	,	3742},
	{82	,	3737},
	{83	,	3730},
	{84	,	3722},
	{86	,	3715},
	{87	,	3705},
	{89	,	3696},
	{90	,	3691},
	{92	,	3688},
	{93	,	3686},
	{95	,	3676},
	{96	,	3644},
	{98	,	3580},
	{99	,	3473},
	{100	,	3363},
	{100	,	3297},
	{100	,	3286},
	{100	,	3283},
	{100	,	3280},
	{100	,	3279},
	{100	,	3279},
	{100	,	3279},
	{100	,	3279}	       
};     

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{
	{0	,	4189},
	{1	,	4171},
	{3	,	4155},
	{4	,	4140},
	{6	,	4126},
	{7	,	4111},
	{9	,	4098},
	{10	,	4084},
	{12	,	4071},
	{13	,	4059},
	{15	,	4046},
	{16	,	4034},
	{18	,	4022},
	{19	,	4010},
	{21	,	3999},
	{22	,	3988},
	{24	,	3977},
	{25	,	3968},
	{26	,	3958},
	{28	,	3948},
	{29	,	3939},
	{31	,	3930},
	{32	,	3922},
	{34	,	3913},
	{35	,	3905},
	{37	,	3896},
	{38	,	3887},
	{40	,	3875},
	{41	,	3862},
	{43	,	3849},
	{44	,	3839},
	{46	,	3831},
	{47	,	3824},
	{48	,	3818},
	{50	,	3813},
	{52	,	3808},
	{53	,	3803},
	{54	,	3799},
	{56	,	3795},
	{57	,	3792},
	{59	,	3788},
	{60	,	3785},
	{62	,	3782},
	{63	,	3779},
	{65	,	3777},
	{66	,	3774},
	{68	,	3773},
	{69	,	3770},
	{71	,	3764},
	{72	,	3756},
	{74	,	3749},
	{75	,	3744},
	{76	,	3738},
	{78	,	3733},
	{79	,	3729},
	{81	,	3724},
	{82	,	3719},
	{84	,	3711},
	{85	,	3703},
	{87	,	3695},
	{88	,	3686},
	{90	,	3678},
	{91	,	3675},
	{93	,	3673},
	{94	,	3667},
	{96	,	3647},
	{97	,	3601},
	{99	,	3521},
	{100	,	3412},
	{100	,	3321},
	{100	,	3291},
	{100	,	3284},
	{100	,	3280},
	{100	,	3279},
	{100	,	3279},
	{100	,	3279},
	{100	,	3279}	       
};           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// <Rbat, Battery_Voltage> Table
// ============================================================
// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{
	{348	,	4182},
	{283	,	4169},
	{295	,	4158},
	{308	,	4142},
	{308	,	4114},
	{325	,	4086},
	{350	,	4061},
	{393	,	4034},
	{480	,	4005},
	{538	,	3983},
	{568	,	3972},
	{578	,	3964},
	{585	,	3956},
	{588	,	3947},
	{593	,	3939},
	{593	,	3929},
	{593	,	3919},
	{590	,	3908},
	{588	,	3897},
	{583	,	3886},
	{578	,	3874},
	{570	,	3863},
	{568	,	3854},
	{563	,	3844},
	{565	,	3837},
	{565	,	3830},
	{568	,	3824},
	{570	,	3819},
	{573	,	3814},
	{573	,	3809},
	{578	,	3805},
	{580	,	3802},
	{583	,	3798},
	{585	,	3795},
	{588	,	3793},
	{588	,	3790},
	{593	,	3789},
	{593	,	3787},
	{595	,	3786},
	{595	,	3784},
	{595	,	3782},
	{598	,	3780},
	{603	,	3777},
	{603	,	3774},
	{608	,	3771},
	{608	,	3766},
	{613	,	3762},
	{613	,	3756},
	{618	,	3750},
	{623	,	3743},
	{625	,	3735},
	{633	,	3727},
	{643	,	3719},
	{660	,	3712},
	{688	,	3707},
	{728	,	3701},
	{780	,	3691},
	{843	,	3667},
	{888	,	3632},
	{910	,	3585},
	{880	,	3551},
	{830	,	3530},
	{790	,	3514},
	{758	,	3501},
	{733	,	3492},
	{715	,	3484},
	{698	,	3477},
	{685	,	3472},
	{675	,	3468},
	{665	,	3464},
	{660	,	3461},
	{653	,	3458},
	{645	,	3455},
	{640	,	3454},
	{643	,	3454},
	{643	,	3454},
	{643	,	3454}	       
};      

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{
	{293	,	4165},
	{293	,	4124},
	{328	,	4103},
	{335	,	4089},
	{348	,	4079},
	{350	,	4064},
	{358	,	4045},
	{360	,	4025},
	{363	,	4008},
	{368	,	3996},
	{373	,	3987},
	{378	,	3980},
	{380	,	3972},
	{383	,	3964},
	{388	,	3956},
	{390	,	3948},
	{393	,	3939},
	{395	,	3930},
	{393	,	3920},
	{393	,	3911},
	{388	,	3900},
	{380	,	3889},
	{368	,	3876},
	{358	,	3864},
	{353	,	3854},
	{348	,	3845},
	{345	,	3837},
	{343	,	3830},
	{343	,	3824},
	{345	,	3819},
	{345	,	3814},
	{348	,	3810},
	{348	,	3806},
	{350	,	3802},
	{353	,	3799},
	{355	,	3796},
	{353	,	3792},
	{355	,	3790},
	{358	,	3788},
	{358	,	3786},
	{360	,	3785},
	{363	,	3784},
	{363	,	3783},
	{363	,	3781},
	{365	,	3779},
	{363	,	3776},
	{365	,	3774},
	{363	,	3770},
	{368	,	3767},
	{365	,	3762},
	{368	,	3757},
	{365	,	3751},
	{365	,	3744},
	{365	,	3736},
	{365	,	3728},
	{368	,	3720},
	{368	,	3710},
	{373	,	3704},
	{388	,	3701},
	{405	,	3696},
	{428	,	3684},
	{458	,	3652},
	{500	,	3582},
	{530	,	3508},
	{583	,	3431},
	{508	,	3402},
	{465	,	3385},
	{440	,	3375},
	{423	,	3367},
	{410	,	3362},
	{400	,	3358},
	{400	,	3355},
	{393	,	3353},
	{383	,	3351},
	{388	,	3351},
	{388	,	3351},
	{388	,	3351}       
};     

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{
	{203	,	4183},
	{203	,	4164},
	{205	,	4148},
	{205	,	4133},
	{208	,	4119},
	{210	,	4105},
	{210	,	4091},
	{213	,	4079},
	{213	,	4067},
	{215	,	4055},
	{215	,	4040},
	{215	,	4026},
	{220	,	4014},
	{223	,	4003},
	{223	,	3992},
	{228	,	3983},
	{228	,	3973},
	{233	,	3964},
	{235	,	3954},
	{238	,	3945},
	{245	,	3937},
	{248	,	3928},
	{250	,	3919},
	{255	,	3911},
	{258	,	3902},
	{258	,	3893},
	{250	,	3881},
	{240	,	3868},
	{228	,	3855},
	{218	,	3844},
	{215	,	3836},
	{210	,	3828},
	{210	,	3822},
	{210	,	3817},
	{210	,	3812},
	{210	,	3808},
	{210	,	3803},
	{213	,	3800},
	{213	,	3796},
	{215	,	3793},
	{215	,	3790},
	{215	,	3787},
	{218	,	3785},
	{218	,	3782},
	{218	,	3780},
	{220	,	3779},
	{220	,	3777},
	{218	,	3775},
	{215	,	3771},
	{213	,	3767},
	{213	,	3762},
	{210	,	3757},
	{210	,	3752},
	{210	,	3747},
	{210	,	3742},
	{210	,	3737},
	{210	,	3730},
	{210	,	3722},
	{213	,	3715},
	{210	,	3705},
	{210	,	3696},
	{210	,	3691},
	{213	,	3688},
	{220	,	3686},
	{223	,	3676},
	{225	,	3644},
	{230	,	3580},
	{245	,	3473},
	{255	,	3363},
	{248	,	3297},
	{218	,	3286},
	{210	,	3283},
	{205	,	3280},
	{203	,	3279},
	{205	,	3279},
	{205	,	3279},
	{205	,	3279}       
}; 

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{
	{190	,	4189},
	{190	,	4171},
	{193	,	4155},
	{193	,	4140},
	{193	,	4126},
	{193	,	4111},
	{193	,	4098},
	{193	,	4084},
	{195	,	4071},
	{198	,	4059},
	{195	,	4046},
	{198	,	4034},
	{198	,	4022},
	{198	,	4010},
	{200	,	3999},
	{200	,	3988},
	{200	,	3977},
	{205	,	3968},
	{205	,	3958},
	{205	,	3948},
	{208	,	3939},
	{210	,	3930},
	{215	,	3922},
	{218	,	3913},
	{223	,	3905},
	{228	,	3896},
	{230	,	3887},
	{225	,	3875},
	{215	,	3862},
	{205	,	3849},
	{200	,	3839},
	{198	,	3831},
	{195	,	3824},
	{195	,	3818},
	{195	,	3813},
	{195	,	3808},
	{195	,	3803},
	{198	,	3799},
	{198	,	3795},
	{198	,	3792},
	{198	,	3788},
	{200	,	3785},
	{200	,	3782},
	{200	,	3779},
	{203	,	3777},
	{203	,	3774},
	{208	,	3773},
	{208	,	3770},
	{200	,	3764},
	{198	,	3756},
	{195	,	3749},
	{195	,	3744},
	{195	,	3738},
	{195	,	3733},
	{195	,	3729},
	{195	,	3724},
	{198	,	3719},
	{195	,	3711},
	{195	,	3703},
	{198	,	3695},
	{198	,	3686},
	{195	,	3678},
	{195	,	3675},
	{200	,	3673},
	{203	,	3667},
	{205	,	3647},
	{210	,	3601},
	{218	,	3521},
	{240	,	3412},
	{245	,	3321},
	{230	,	3291},
	{213	,	3284},
	{203	,	3280},
	{200	,	3279},
	{200	,	3279},
	{200	,	3279},
	{200	,	3279}	       
}; 

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
  {0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },  
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};    

// ============================================================
// function prototype
// ============================================================
int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

#endif	//#ifndef _CUST_BATTERY_METER_TABLE_H

